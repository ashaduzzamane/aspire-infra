AWSTemplateFormatVersion: 2010-09-09
Description: This template provisions IAM groups, an automation user, and users with read-only permission

Parameters:
  UserPassword:
    Type: String
    Default: 'password'

Resources:
  DeveloperPolicy:
    Type: 'AWS::IAM::Policy'
    Properties:
      PolicyName: DeveloperPolicy
      PolicyDocument:
        Version: 2012-10-17
        Statement:
          - Effect: Allow
            Action:
              - '*'
            Resource: '*'
      Groups:
        - !Ref DeveloperGroup

  DeveloperGroup:
    Type: AWS::IAM::Group

  AutomationPolicy:
    Type: 'AWS::IAM::Policy'
    Properties:
      PolicyName: AutomationPolicy
      PolicyDocument:
        Version: 2012-10-17
        Statement:
        - Sid: DeployCFN
          Effect: Allow
          Action:
            - 'cloudformation:*'
          Resource:
            - '*'
        - Sid: PreventCFNDeletion
          Effect: Deny
          Action:
            - 'cloudformation:DeleteStack'
          Resource:
            - '*'
      Groups:
        - !Ref AutomationGroup 

  AutomationGroup:
    Type: AWS::IAM::Group        

  AutomationUser:
    Type: AWS::IAM::User
    Properties:
      UserName: automation@maxgala.com
      LoginProfile:
        Password:
          Ref: UserPassword
        PasswordResetRequired: true
      Groups:
        - !Ref AutomationGroup

  SalehBakhit:
    Type: AWS::IAM::User
    Properties:
      UserName: saleh.bakhit@hotmail.com
      LoginProfile:
        Password:
          Ref: UserPassword
        PasswordResetRequired: true
      Groups:
        - !Ref DeveloperGroup

  AhmedHamodi:
    Type: AWS::IAM::User
    Properties:
      UserName: ahmed.r.hamodi@gmail.com
      LoginProfile:
        Password:
          Ref: UserPassword
        PasswordResetRequired: true
      Groups:
        - !Ref DeveloperGroup

  ArsalanRana:
    Type: AWS::IAM::User
    Properties:
      UserName: arsalan.rana@maxgala.com
      LoginProfile:
        Password:
          Ref: UserPassword
        PasswordResetRequired: true
      Groups:
        - !Ref DeveloperGroup

  TayyabTanveer:
    Type: AWS::IAM::User
    Properties:
      UserName: tayyaabtanveer@gmail.com
      LoginProfile:
        Password:
          Ref: UserPassword
        PasswordResetRequired: true
      Groups:
        - !Ref DeveloperGroup

  ShehryarSuleman:
    Type: AWS::IAM::User
    Properties:
      UserName: shehryarsuleman@gmail.com
      LoginProfile:
        Password:
          Ref: UserPassword
        PasswordResetRequired: true
      Groups:
        - !Ref DeveloperGroup

  NabaSiddiqui:
    Type: AWS::IAM::User
    Properties:
      UserName: naba@poketapp.com
      LoginProfile:
        Password:
          Ref: UserPassword
        PasswordResetRequired: true
      Groups:
        - !Ref DeveloperGroup

  HafsaZahid:
    Type: AWS::IAM::User
    Properties:
      UserName: hafsabzahid@gmail.com
      LoginProfile:
        Password:
          Ref: UserPassword
        PasswordResetRequired: true
      Groups:
        - !Ref DeveloperGroup

  AhmedJamal:
    Type: AWS::IAM::User
    Properties:
      UserName: ahmedjamal0208@gmail.com
      LoginProfile:
        Password:
          Ref: UserPassword
        PasswordResetRequired: true
      Groups:
        - !Ref DeveloperGroup

  RizTaha:
    Type: AWS::IAM::User
    Properties:
      UserName: riztaha@gmail.com
      LoginProfile:
        Password:
          Ref: UserPassword
        PasswordResetRequired: true
      Groups:
        - !Ref DeveloperGroup

  KashifSiddiqui:
    Type: AWS::IAM::User
    Properties:
      UserName: kashif89@gmail.com
      LoginProfile:
        Password:
          Ref: UserPassword
        PasswordResetRequired: true
      Groups:
        - !Ref DeveloperGroup